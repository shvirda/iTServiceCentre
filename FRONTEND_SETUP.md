# PromoService V0001 - Запуск Frontend приложения

## Предварительные требования

**Обязательно запустите backend API сервер перед запуском frontend!**

```bash
# В одном терминале запустите backend
python run_backend.py
```

## Установка зависимостей

Убедитесь, что все зависимости установлены:

```bash
pip install -r requirements.txt
```

## Запуск Frontend приложения

```bash
python run_frontend.py
```

На консоль будет выведено:
```
============================================================
PromoService V0001 - Frontend Application
============================================================

Попытка подключения к API: http://127.0.0.1:5000

Показание окна авторизации...
```

## Авторизация в приложении

### Первый вход (по умолчанию):
- **Username**: admin
- **Password**: admin123

**⚠️ ВАЖНО: Измените пароль администратора после первого входа!**

## Интерфейс приложения

После успешной авторизации откроется главное окно с 10 вкладками:

### Реализованные модули:
1. ✓ **Управление БД** - Создание, инициализация БД, резервное копирование
2. ✓ **Ввод клиентов** - Добавление информации о клиентах (в разработке)

### Модули в разработке (заглушки):
3. Ввод техники на ремонт
4. Ввод товара на склад
5. Конфигурация сервисов (Telegram, SMS, Email)
6. Поиск и таблица клиентов
7. Поиск и таблица техники
8. Поиск и таблица товара
9. Управление сотрудниками
10. Логирование и история операций

## Структура главного окна

```
┌─ Меню (Файл, Правка, Справка)
├─ Заголовок: "PromoService V0001 - [Пользователь]"
├─ [10 вкладок с модулями]
└─ Статус-бар: Информация о пользователе и статус API
```

## Функции меню

### Меню "Файл"
- **Выход** - Закрыть приложение (с подтверждением)

### Меню "Правка"
- **Настройки** - Окно настроек (в разработке)

### Меню "Справка"
- **О программе** - Информация о приложении и версии

## Решение проблем

### Проблема: "Не удается подключиться к 127.0.0.1:5000"

**Решение:**
1. Убедитесь, что backend сервер запущен: `python run_backend.py`
2. Проверьте, что API сервер доступен: `curl http://127.0.0.1:5000/api/health`
3. Если порт занят, измените PORT в `config.py`

### Проблема: "ModuleNotFoundError: No module named 'PyQt6'"

**Решение:**
```bash
pip install PyQt6
```

### Проблема: Окно авторизации не закрывается после входа

**Решение:**
1. Проверьте консоль backend на наличие ошибок
2. Убедитесь, что пользователь существует в БД
3. Перезагрузите backend API

### Проблема: API ошибка при авторизации

**Решение:**
1. Проверьте, что в БД есть пользователь admin
2. Сбросьте БД: удалите `promoservice_db.sqlite3` и перезагрузите backend
3. Проверьте логи backend в терминале

## Горячие клавиши

- **Ctrl+Q** - Выход (в главном окне)
- **Enter** - Вход (в окне авторизации)
- **Tab** - Переключение вкладок

## Конфигурация

### Изменение URL API

Если backend работает на другом хосте/порте, отредактируйте `config.py`:

```python
# config.py
API_HOST = '192.168.1.100'  # IP адрес сервера
API_PORT = 5001             # Порт сервера
```

Или при запуске frontend:

```bash
# Запуск на другом хосте
python run_frontend.py --api-url http://192.168.1.100:5000
```

(Эта опция будет добавлена в будущих версиях)

## Разработка новых модулей

### Шаблон нового модуля

Создайте файл `frontend/modules/moduleX_name.py`:

```python
from PyQt6.QtWidgets import QWidget, QVBoxLayout, QLabel

class NameWidget(QWidget):
    def __init__(self, parent=None, api_client=None):
        super().__init__(parent)
        self.api_client = api_client
        self.init_ui()
    
    def init_ui(self):
        layout = QVBoxLayout()
        layout.addWidget(QLabel("Модуль X: Название"))
        self.setLayout(layout)
```

Затем добавьте в `frontend/main_window.py`:

```python
from frontend.modules.moduleX_name import NameWidget

# В методе init_tabs():
self.moduleX = NameWidget(self, self.api_client)
self.tabs.addTab(self.moduleX, "X. Название")
```

## Дополнительные команды

### Запуск тестов API
```bash
python -m pytest tests/test_api.py -v
```

### Просмотр информации о БД
```bash
sqlite3 promoservice_db.sqlite3 ".tables"
```

### Просмотр пользователей в БД
```bash
sqlite3 promoservice_db.sqlite3 "SELECT * FROM users;"
```

## Что дальше?

### Следующие этапы разработки:

1. **Модули ввода данных** (3, 4, 9)
   - Форма для техники на ремонт
   - Форма для товара на склад
   - Управление сотрудниками

2. **Модули поиска и таблиц** (6, 7, 8, 10)
   - Табличные виджеты с поиском
   - Сортировка и фильтрация
   - Редактирование записей

3. **API Endpoints**
   - CRUD операции для всех таблиц
   - Полнотекстовый поиск

4. **Сервисы**
   - Интеграция Telegram бота
   - Отправка SMS уведомлений
   - Email рассылки

## Полезные ссылки

- [PyQt6 документация](https://www.riverbankcomputing.com/static/Docs/PyQt6/index.html)
- [Flask документация](https://flask.palletsprojects.com/)
- [SQLAlchemy документация](https://docs.sqlalchemy.org/)

---

**Версия**: 0.0.1 (Alpha)
**Дата**: 2025-12-29
**Статус**: Frontend часть в разработке
